"use strict";function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class clrly{static new(t="div",e,...r){if(e=e||{},"clrly"==t||"string"!=typeof t)return"string"!=typeof t&&(e.from=t),this._newElementFromComponent(e,r);var i=this._newElement(t);return this.editAttributes(i,e),this._appendChildrenToElement(i,r),i.editAttributes=function(t){return clrly.editAttributes(i,t)},i.isClearlyHTML=!0,i}static _appendChildrenToElement(t,e){if(e)for(var r of e)if(Array.isArray(r))this._appendChildrenToElement(t,r);else try{r.isClearlyComponent&&(r=r.HTML),t.appendChild(null==r.nodeType?document.createTextNode(r.toString()):r)}catch(t){}}static _newElement(t){var e=document.createElement(t);return document.body.appendChild(e),e}static _newElementFromComponent(t,e){var r=t.from;if(!r)throw new Error("Cannot find the component");t.children=e;var i=new r(t),n=i.element;return i.style&&(n.style=i.style),i.HTML=n,i.isClearlyComponent=!0,i.start&&i.start(t),i}static editAttributes(t,e){if(Array.isArray(t)){for(var r of t)this.editAttributes(r,e);return t}if(e){var i=t.isClearlyComponent;for(var n in e){if("parent"!=n&&"innerHTML"!=n){var o=typeof e[n];"function"==o||"object"==o||i?t[n]=e[n]:t.setAttribute(n,e[n])}if(e.parent)e.parent.appendChild(t);e.innerHTML&&(t.innerHTML=e.innerHTML)}}return t}static add(t,e=document.documentElement){try{return e.innerHTML+=t,t}catch(t){}}static id(t){return this.Xid(document,t)}static class(t){return this.Xclass(document,t)}static tag(t){return this.Xtag(document,t)}static select(t){return this.Xselect(document,t)}static attribute(t,e){return this.Xattribute(document,t,e)}static import(t,e,r){return Array.isArray(t)||(t=[t]),this._importRec(t,e,r,0),t}static _importRec(t,e,r,i){var n,o=t[i];for(var a in n=o.includes(".css")?this.new("link",{parent:document.head,href:o,rel:"stylesheet"}):this.new("script",{parent:document.head,src:o}),e)n.setAttribute(a,e[a]);n.onload=function(){i===t.length-1?r&&r():clrly._importRec(t,a,r,i+1)}}static title(t){return document.title=t}static ogTitle(t){return Array.from(this.attribute("property","og:title")).forEach((function(t){t.remove()})),this.new("meta",{parent:document.head,property:"og:title",content:t}),this.attribute("property","og:title")[0].href}static description(t){return Array.from(this.attribute("name","description")).forEach((function(t){t.remove()})),this.new("meta",{parent:document.head,name:"description",content:t}),this.attribute("name","description")[0].href}static ogDescription(t){return Array.from(this.attribute("property","og:description")).forEach((function(t){t.remove()})),this.new("meta",{parent:document.head,property:"og:description",content:t}),this.attribute("property","og:description")[0].href}static icon(t){return Array.from(this.attribute("rel","icon")).forEach((function(t){t.remove()})),this.new("link",{parent:document.head,rel:"icon",href:t}),this.attribute("rel","icon")[0].href}static ogImage(t){return Array.from(this.attribute("property","og:image")).forEach((function(t){t.remove()})),this.new("meta",{parent:document.head,property:"og:image",content:t}),this.attribute("property","og:image")[0].href}static theme(t){return Array.from(this.attribute("name","theme-color")).concat(Array.from(this.attribute("name","apple-mobile-web-app-status-bar-style"))).forEach((function(t){t.remove()})),this.new("meta",{parent:document.head,name:"theme-color",content:t}),this.new("meta",{parent:document.head,name:"apple-mobile-web-app-status-bar-style",content:t}),this.attribute("name","theme-color")[0].content}static dir(t){document.body.dir=t}static mobileFriendly(t=!0){var e="app"==t?", user-scalable=no":"";return this.new("meta",{parent:document.head,name:"viewport",content:`width=device-width, initial-scale=1.0${e}`})}static initialize(t){var e=[];return t.title&&e.push(this.title(t.title)),t.ogTitle&&e.push(this.ogTitle(t.ogTitle)),t.description&&e.push(this.description(t.description)),t.ogDescription&&e.push(this.ogDescription(t.ogDescription)),t.icon&&e.push(this.icon(t.icon)),t.ogImage&&e.push(this.ogImage(t.ogImage)),t.theme&&e.push(this.theme(t.theme)),t.dir&&e.push(this.dir(t.dir)),t.mobile&&e.push(this.mobileFriendly(t.mobile)),e}static style(t){return this.new("style",{parent:document.head,innerHTML:t})}static toRGB(t){t=3==t.length?t.replace(/(.)/g,"$1$1"):t;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:""}static toHEX(t){function e(t){return 1==(t=t.toString(16)).length?"0"+t:t}return"#"+e(t.r)+e(t.g)+e(t.b)}static colorBrightness(t,e){var r=this.toRGB(t);return e=(e+100)/100,this.toHEX({r:Math.min(255,Math.floor(r.r*e)),g:Math.min(255,Math.floor(r.g*e)),b:Math.min(255,Math.floor(r.b*e))})}static get url(){return window.location.href}static get pageUrl(){return this.url.replace(window.location.search,"").replace(window.location.hash,"")}static get hash(){return decodeURI(window.location.hash.substring(1))}static get search(){return new URL(window.location.href).searchParams}static reload(){window.location.reload()}static redirect(t){window.location.replace(t)}static go(t,e){e?window.open(t):window.location.href=t}static duplicate(){this.go(this.url,!0)}static pageURL(){this.go(this.pageUrl)}static get _MONTHS(){return["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]}static cookie(t,e,r,i,n){var o="31 Dec 2036";return void 0!==r&&void 0!==i&&void 0!==n&&(o=r+" "+(i=this._MONTHS[i-1])+" "+n),document.cookie=t+"="+e+"; expires="+o+" 23:59:59 UTC; path=/",e}static deleteCookie(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}static getCookie(t){for(var e=t+"=",r=decodeURIComponent(document.cookie).split(";"),i=0;i<r.length;i++){for(var n=r[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}static ajax(t,e,r){fetch(t,e).then((t=>t.text())).then((t=>r(t)))}static json(t,e,r){fetch(t,e).then((t=>t.json())).then((t=>r(t)))}static getXML(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&200==this.status&&e(this.responseXML)},r.open("GET",t,!0),r.send()}static Xid(t,e){try{return t.getElementById(e)}catch(t){return}}static Xclass(t,e){try{return t.getElementsByClassName(e)}catch(t){return[]}}static Xtag(t,e){try{return t.getElementsByTagName(e)}catch(t){return[]}}static Xselect(t,e){try{return t.querySelectorAll(e)}catch(t){return[]}}static Xattribute(t,e,r){try{return this.Xselect(t,"["+e+'="'+r+'"]')}catch(t){return[]}}static Xvalue(t){return t.firstChild.nodeValue}static random(t,e){return Math.random()*(e-t)+t}static randomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}static toFile(t,e="text/html"){return URL.createObjectURL(new Blob([t],{type:e}))}static download(t,e){var r=this.new("a",{href:t,download:e});r.click(),r.remove()}}exports.default=clrly,_defineProperty(clrly,"component",class{constructor(t){if(this.constructor===clrly.component)throw new Error("clrly.component is not an initializeable object, make your own component")}start(){}get element(){throw new Error("get element() does not exist")}get style(){return""}update(t=!0){var e=this.element;e.style=this.style,this.HTML.parentNode.replaceChild(e,this.HTML),this.HTML=e,t&&this.start()}registerUpdate(t,e,r){var i=this;i[t]||(i[t]={}),i[t]=new Proxy(i[t],{set:function(t,n,o){return t[n]=o,i.update(e),r&&r(n,o),!0}})}unregisterUpdate(t){this[t]={...this[t]}}});
