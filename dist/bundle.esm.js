function t(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function e(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}var n,r,i,o,s;"function"==typeof SuppressedError&&SuppressedError;class a{constructor(t,e=!0){if(this.state={},this.HTML=void 0,this.isClearlyComponent=!0,this.constructor===c.component)throw new Error("clrly.component is not an initializeable object, make your own component");e&&(this.state=t,this.makeState())}start(){}element(){throw new Error("the element function must be provided")}style(){return""}update(t=!0){var e,n;const r=this.element();r.style=this.style(),null===(n=null===(e=this.HTML)||void 0===e?void 0:e.parentNode)||void 0===n||n.replaceChild(r,this.HTML),this.HTML=r,t&&this.start()}makeState(t="state",e,n){const r=this;return r[t]||(r[t]={}),r[t]=new Proxy(r[t],{set:function(t,i,o){return t[i]!==o&&(t[i]=o,r.update(e),n&&n(i,o)),!0}})}destroyState(t="state"){this[t]=Object.assign({},this[t])}}class c{static new(t,s,...a){const c=s||{};if(("component"===t||"string"!=typeof t)&&null!==t)return e(this,n,"m",o).call(this,"component"===t?c.from:t,c,a);if("clear"==t||null===t)return this.render(a),this.editAttributes(a,c),a;const l=e(this,n,"m",i).call(this,t,!1!==c.render&&"false"!==c.render);return this.editAttributes(l,c),e(this,n,"m",r).call(this,l,a),l.editAttributes=t=>{n.editAttributes(l,t)},l.isClearlyHTML=!0,l}static render(t,e=!0,n=document.body){if(Array.isArray(t)){for(const r of t)this.render(r,e,n);return}const r=t.isClearlyComponent?t.HTML:t;e?n.appendChild(r):r.remove()}static editAttributes(t,e){if(Array.isArray(t)){for(const n of t)this.editAttributes(n,e);return t}if(e){const n=t.isClearlyComponent;for(const r in e){if("parent"!==r&&"innerHTML"!==r){const i=typeof e[r];"function"===i||"object"===i||n?t[r]=e[r]:t.setAttribute(r,e[r])}if(e.parent){e.parent.appendChild(t)}e.innerHTML&&(t.innerHTML=e.innerHTML)}}return t}static add(t,e=document.documentElement){try{return e.innerHTML+=t,t}catch(t){}}static $(t){return document.querySelector(t)}static $$(t){return document.querySelectorAll(t)}static byAttribute(t,e){return this.$$(`[${t}="${e}"]`)}static import(t,r,i){return Array.isArray(t)||(t=[t]),e(this,n,"m",s).call(this,t,r,i,0),t}static title(t){return document.title=t}static ogTitle(t){Array.from(n.byAttribute("property","og:title")).forEach((t=>{t.remove()})),n.new("meta",{parent:document.head,property:"og:title",content:t})}static description(t){Array.from(n.byAttribute("name","description")).forEach((t=>{t.remove()})),n.new("meta",{parent:document.head,name:"description",content:t})}static ogDescription(t){Array.from(n.byAttribute("property","og:description")).forEach((t=>{t.remove()})),n.new("meta",{parent:document.head,property:"og:description",content:t})}static icon(t){Array.from(n.byAttribute("rel","icon")).forEach((t=>{t.remove()})),n.new("link",{parent:document.head,rel:"icon",href:t})}static ogImage(t){Array.from(n.byAttribute("property","og:image")).forEach((t=>{t.remove()})),n.new("meta",{parent:document.head,property:"og:image",content:t})}static theme(t){Array.from(n.byAttribute("name","theme-color")).concat(Array.from(n.byAttribute("name","apple-mobile-web-app-status-bar-style"))).forEach((function(t){t.remove()})),n.new("meta",{parent:document.head,name:"theme-color",content:t}),n.new("meta",{parent:document.head,name:"apple-mobile-web-app-status-bar-style",content:t})}static dir(t){document.body.dir=t}static mobileFriendly(t=!0){const e="app"===t?", user-scalable=no":"";return n.new("meta",{parent:document.head,name:"viewport",content:`width=device-width, initial-scale=1.0${e}`})}static initialize(t){const e={},n={title:this.title,ogTitle:this.ogTitle,description:this.description,ogDescription:this.ogDescription,icon:this.icon,ogImage:this.ogImage,theme:this.theme,dir:this.dir,mobile:this.mobileFriendly};for(const r in n){const i=n[r];t[r]&&(e[r]=i(t[r]))}return e}static style(t){return n.new("style",{parent:document.head,innerHTML:t})}static toRGB(t){if("string"==typeof t){const e=3==t.length?t.replace(/(.)/g,"$1$1"):t,n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:0,g:0,b:0}}if("object"==typeof t&&void 0!==t.h&&void 0!==t.s&&void 0!==t.l){const e=t.h,n=t.s/100,r=t.l/100,i=n*Math.min(r,1-r),o=t=>(t+e/30)%12,s=t=>r-i*Math.max(-1,Math.min(o(t)-3,Math.min(9-o(t),1)));return{r:Math.round(255*s(0)),g:Math.round(255*s(8)),b:Math.round(255*s(4))}}return{r:0,g:0,b:0}}static toHEX(t){let e=t;void 0!==e.h&&void 0!==e.s&&void 0!==e.l&&(e=this.toRGB(e));const n=t=>{const e=t.toString(16);return 1==e.length?"0"+e:e};return"#"+n(e.r)+n(e.g)+n(e.b)}static toHSL(t){"string"==typeof t&&(t=this.toRGB(t));const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),s=i-o;let a=0==s?0:i==e?(n-r)/s%6:i==n?(r-e)/s+2:(e-n)/s+4;a=Math.round(60*a),a<0&&(a+=360);let c=(i+o)/2,l=0==s?0:s/(1-Math.abs(2*c-1));return l=+(100*l).toFixed(1),c=+(100*c).toFixed(1),{h:a,s:l,l:c}}static colorBrightness(t,e){const n="object"==typeof t?void 0!==t.r&&void 0!==t.g&&void 0!==t.b?t=>this.toRGB(t):t=>t:t=>this.toHEX(t),r=this.toHSL(t);return r.l=e,n(r)}static get url(){return window.location.href}static get pageUrl(){return this.url.replace(window.location.search,"").replace(window.location.hash,"")}static get hash(){return decodeURI(window.location.hash.substring(1))}static get search(){return new URL(window.location.href).searchParams}static reload(){window.location.reload()}static redirectTo(t){window.location.replace(t)}static go(t,e=!1){e?window.open(t):window.location.href=t}static duplicateWindow(){this.go(this.url,!0)}static request(t,e,n){fetch(t,e).then((t=>t.text())).then((t=>null==n?void 0:n(t))).catch((t=>null==n?void 0:n(null)))}static jsonRequest(t,e,n){fetch(t,e).then((t=>t.json())).then((t=>null==n?void 0:n(t))).catch((t=>null==n?void 0:n(null)))}static blobRequest(t,e,n){fetch(t,e).then((t=>t.blob())).then((t=>null==n?void 0:n(t))).catch((t=>null==n?void 0:n(null)))}static random(t,e){return Math.random()*(e-t)+t}static randomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}static toFile(t,e="text/html",n=!1){const r=[];return n&&r.push(new Uint8Array([239,187,191])),r.push(t),URL.createObjectURL(new Blob(r,{type:e}))}static download(t,e){const r=n.new("a",{href:t,download:e});r.click(),r.remove()}}n=c,r=function t(r,i){if(i)for(let o of i)if(Array.isArray(o))e(this,n,"m",t).call(this,r,o);else try{o.isClearlyComponent&&(o=o.HTML),r.appendChild(null==o.nodeType?document.createTextNode(o.toString()):o)}catch(t){}},i=function(t,e=!0){const n=document.createElement(t);return e&&this.render(n,e),n},o=function(t,e,n){let r=t;if(!r||"function"!=typeof r)throw new Error("Cannot find the component");if(e.children=n,!/^\s*class\s+/.test(r.toString())){const t=r,e={};r=class extends a{element(){return t(this.state,this,e)}}}let i=new r(e);const o=i.element(),s=i.style();return s&&(o.style=s),i.HTML=o,i.isClearlyComponent=!0,i.start&&i.start(),i},s=function t(r,i,o,s){const a=r[s];let c;c=a.includes(".css")?n.new("link",{parent:document.head,href:a,rel:"stylesheet"}):n.new("script",Object.assign({parent:document.head,src:a},i)),c.onload=function(){s===r.length-1?null==o||o():e(n,n,"m",t).call(n,r,i,o,s+1)}},c.component=a;class l extends a{constructor(){super(...arguments),this.sProps={},this.switcherParent=void 0}appendTo(t,e={}){this.switcherParent=t,this.sProps=e,this.start(),this.update()}start(){this.HTML.editAttributes({parent:this.switcherParent})}onSwitch(){}get isSwitchable(){return!0}}class h extends a{constructor(t){super(t,!0),this._switchables={},this.clear()}element(){const t=c.new("div"),e=this.state.current;if(null==e)return t;const n=this._get(this instanceof d?e.route:e.name);return n&&n.isSwitchable&&(this instanceof d&&!e.browserNavigation&&window.history.pushState({},"",e.route),n.appendTo(t,e.props),n.onSwitch()),t}add(t,e){return this._switchables[t]=e,e.HTML.remove(),t}set current(t){this.state.current=t}clear(){this._switchables={}}}class u extends h{_get(t){return this._switchables[t]}get currentName(){return this.state.current.name}}class d extends h{static get NOT_FOUND_PATH(){return"/404"}constructor(e){super(e);const n=this;window.onpopstate=()=>t(this,void 0,void 0,(function*(){return yield n._navigate(!0)}))}_get(t){var e;if(t=null===(e=t.match(/^\/?([^?#]+?)\/?(?=\?|#|$)/))||void 0===e?void 0:e[1])for(const e in this._switchables)if(e.match(`^/?${t}/?$`))return this._switchables[e];return this._switchables[d.NOT_FOUND_PATH]}get currentRoute(){return this.state.current.route}clear(){super.clear(),this.add(d.NOT_FOUND_PATH,this.state.notFound)}_navigate(){return t(this,arguments,void 0,(function*(t=!0){this.current={route:window.location.pathname+window.location.search+window.location.hash,props:{},browserNavigation:t}}))}initialize(){return t(this,void 0,void 0,(function*(){yield this._navigate(!0)}))}}class p extends l{element(){const t=this.state,{children:e}=t,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["children"]);return c.new("div",n,...e)}onSwitch(){var t,e;null===(e=(t=this.state).onSwitch)||void 0===e||e.call(t)}}export{a as ClearlyComponent,d as Router,p as Sdiv,l as Switchable,u as Switcher,c as clrly};
//# sourceMappingURL=bundle.esm.js.map
